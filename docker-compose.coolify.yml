services:
  moltbot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: moltbot
    restart: unless-stopped
    user: root
    command: node dist/index.js gateway --bind lan --port 18789 --allow-unconfigured
    environment:
      - NODE_ENV=production
      - CLAWDBOT_GATEWAY_TOKEN=${CLAWDBOT_GATEWAY_TOKEN}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - HOME=/home/node
    volumes:
      - moltbot_data_v2:/home/node/.moltbot
      - moltbot_workspace_v2:/home/node/clawd

volumes:
  moltbot_data_v2:
  moltbot_workspace_v2:
