services:
  moltbot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: moltbot
    restart: unless-stopped
    expose:
      - "18789"
    command: node dist/index.js gateway --bind lan --port 18789 --allow-unconfigured
    environment:
      - NODE_ENV=production
      - CLAWDBOT_GATEWAY_TOKEN=${CLAWDBOT_GATEWAY_TOKEN}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
    volumes:
      - moltbot_data:/root/.clawdbot
      - moltbot_workspace:/root/clawd

volumes:
  moltbot_data:
  moltbot_workspace:
